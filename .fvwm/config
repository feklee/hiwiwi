AddToFunc InitPager
+ I . Module FvwmPager 0 8
+ I . *FvwmPager: Columns 1
+ I . *FvwmPager: Rows 9
+ I *FvwmPager: Back gray5
+ I *FvwmPager: Fore $[FVWM_WBG]
+ I *FvwmPager: Font none
+ I *FvwmPager: MiniIcons


# Colors for widgets (background, foreground, highlight):
SetEnv FVWM_WBG gray35
SetEnv FVWM_WFG black
SetEnv FVWM_WHL gray70

# Colors for text, etc. fields (background, foreground, highlight):
SetEnv FVWM_FBG gray15
SetEnv FVWM_FFG green

# Colors for windows (background foreground, highlight):

SetEnv FVWM_WINBG gray30
SetEnv FVWM_WINFG black
SetEnv FVWM_WINHL gray60


#
# Paths for FVWM
#
ImagePath $[HOME]/.fvwm


#
# Removing built in bindings
#

Key F1 R A -
Key Tab A M -
Key Escape A MC -
Mouse 1 TS A -
Mouse 1 F  A -
Mouse 2 R  A -
DestroyFunc FuncFvwmRaiseLowerX



#
# Utility functions:
#

# Definition of a function to allow easy inline Perl preprocessing: Simply call
# the function with a perl expression enclosed in '%{' and '}%'.  Variables
# of type "$f::variable" can be used to store state in between function calls.
DestroyFunc .
AddToFunc .
+ I SendToModule FvwmPerl eval preprocess({ 'command' => 1 } , q~$*~)




#
# Desktop setup
#

DesktopSize 1x1



#
# Window look and feel
#

SetEnv FVWM_BORDER_WIDTH 12

Style * DecorateTransient
Style * !Iconifiable
Style * ClickToFocus
Style * ClickToFocusRaisesOff
Style * GrabFocusTransient
Style * TileCascadePlacement
Style * ForeColor $[FVWM_WINFG], BackColor $[FVWM_WINBG]
Style * HilightFore $[FVWM_WINFG], HilightBack $[FVWM_WINHL]
Style * MwmBorder, DepressableBorder
Style * NoIcon
Style * BorderWidth $[FVWM_BORDER_WIDTH], HandleWidth $[FVWM_BORDER_WIDTH]
Style * MwmBorder
Style * MwmButtons, MwmFunctions
Style * Font "xft:DejaVuSans:size=10"
Borderstyle -- Raised
OpaqueMoveSize 100
HideGeometryWindow Never
SnapAttraction 5

Style backgroundterm !Title, !Borders, !Handles, GrabFocus, Style *
Style backgroundterm BackColor gray5, HilightBack gray5

Style FvwmButtons BackColor "Dark Green"

Style * EWMHMiniIconOverride
Style Emacs MiniIcon "/usr/share/icons/hicolor/scalable/apps/emacs.svg"
Style Firefox MiniIcon "/usr/share/icons/hicolor/48x48/apps/firefox.png"
Style Thunderbird MiniIcon \
      "/usr/share/icons/hicolor/48x48/apps/thunderbird.png"
Style Gramps MiniIcon "/usr/share/gramps/images/48x48/gramps.png"
Style Evince MiniIcon "/usr/share/icons/hicolor/48x48/apps/evince.png"
Style Acroread MiniIcon \
      "/opt/Adobe/Reader9/Resource/Icons/48x48/AdobeReader9.png"
Style Vuescan MiniIcon \
      "/usr/share/icons/gnome/48x48/devices/scanner.png"

ButtonStyle 6 vector 4 50x25@1 75x75@0 25x75@0 50x25@1
ButtonStyle 6 - MwmDecorShade

AddToFunc MyMaximizeInLayer3
+ I All ("Firefox|Thunderbird|Gramps|Evince|Acroread|Emacs", Layer 3, \
        !Transient) \
    ResizeMove 2592p 1620p 288p 0p

AddToFunc MyUndecorateInLayer3
+ I All (Layer 3, !Transient) WindowStyle NoTitle, !Borders

AddToFunc MyUpdateLayer3
+ I MyUndecorateInLayer3
+ I UpdateStyles
+ I MyMaximizeInLayer3

AddToFunc MyUpdate
+ I Layer 0 3
+ I UpdateStyles # Firefox may open more windows now -> current may change
+ I MyUpdateLayer3

AddToFunc MyUpdateIfInList
+ I Current (Maximizable, \
    "Firefox|Thunderbird|Emacs|Gramps|Evince|Acroread|Vuescan") MyUpdate

AddToFunc MyResizeInLayer4
+ I Current (Layer 4, "Firefox") Resize 1024p 768p

# Some applications always put all windows in the same layer, e.g. Vuescan.
# Scale the transient windows. Moving them to layer 4 may also move the window
# to layer 4, at least with Vuescan this seems to be the case.
AddToFunc MyResizeTransientOnLayer3
+ I All (CurrentDesk, Layer 3, Transient, "Vuescan") Resize 1024p 768p

AddToFunc MyUpdateOnConditions
+ I Any (CurrentDesk, Layer 3) MyResizeInLayer4
+ I None (CurrentDesk, Layer 3) MyUpdateIfInList
+ I MyResizeTransientOnLayer3
+ I InitBackgroundTerms
# above called again in case there were background terms restarted


*FvwmEvent: Cmd
*FvwmEvent: add_window MyUpdateOnConditions

# Good to have after a restart of FVWM:
*FvwmEvent: new_desk MyUpdateLayer3

# Needs to be called after defining vector buttons to match the colors, etc.,
# of all buttons with that of the title:
ButtonStyle All --  UseTitleStyle

AddToFunc RaiseAndMove
+ I Raise
+ M ThisWindow (!Maximized) Move

AddToFunc Shade
+ D WindowShade

AddToFunc RaiseAndResize
+ I Raise
+ M ThisWindow (!Maximized) Resize

# To get pseudo full screen 1024x768 mode with VMware Workstation running.
AddToFunc ResizeVMware
+ I Resize 1032p 801p
+ I Move 0 0
+ I Move w-9p w-51p

# Useful to easily get Windows that are too large, missing back into a
# manageable state.
AddToFunc Resize800x600
+ I Resize 800p 600p
+ I Move 64p 64p

Key   F4     WTSF 4    Close
Mouse 1      T    A    RaiseAndMove
Mouse 1      W    A    Nop
Mouse 1      SF   A    RaiseAndResize



#
# Miscellaneous
#

AddToFunc InitX
+ I Exec exec xhost amd300
+ I Exec exec xhost ibm550
+ I Exec exec xhost localhost
+ I Exec exec xset b on
+ I Exec exec xset s off
+ I Exec exec xset -dpms
+ I Exec exec sudo /usr/local/lib/t41-tools/update_power
+ I Exec exec echo "$DBUS_SESSION_BUS_ADDRESS" >/var/tmp/DBUS_SESSION_BUS_ADDRESS

EdgeResistance 100 32
EdgeScroll 0 0
EdgeThickness 1

# Gives focus to the window currently on top
AddToFunc FocusRaised
+ I Next (AcceptsFocus,Raised,CurrentDesk) Focus

# From the FVWM man page: "The windows in the ring are either ordered by
# creation time (if the FPSortWindowlistByFocus respecively NeverFocus or
# MouseFocus styles are used) or by the last time they had the focus."
AddToFunc RaiseAndFocusNext
+ I Next (CurrentDesk,!Focused,AcceptsFocus) Raise
+ I Next (CurrentDesk,!Focused,AcceptsFocus) Focus

AddToFunc RaiseAndFocusPrev
+ I Prev (CurrentDesk,!Focused,AcceptsFocus) Raise
+ I Prev (CurrentDesk,!Focused,AcceptsFocus) Focus

Key U                     A CMS Restart
Key C                     A CMS FvwmConsole
Key G                     A CMS EscapeFunc
Key L                     A   4 Exec exec xscreensaver-command -lock
Key Escape                A   4 Exec exec xkill
Key XF86MonBrightnessDown A   - Exec exec xbacklight -dec 10
Key XF86MonBrightnessUp   A   - Exec exec xbacklight -inc 10

# Disables "Builtin  Menu":
Silent Key Help R A -
Key F1 R A -
DestroyMenu MenuFvwmRoot

# Called on startups and restarts
AddToFunc StartFunction
+ I ModuleSynchronous FvwmPerl
+ I InitX
+ I InitDesks
+ I InitWindowMenus
+ I InitPager
+ I InitButtons
+ I Module FvwmEvent
+ I InitBackgroundTerms

# Called during restarts just after StartFunction
AddToFunc RestartFunction
+ I InitBackgroundTerms
+ I MyUpdateLayer3


# Setup of FVWMButtons (also known as the button bar or as the task bar)
AddToFunc InitButtons
+ I . Module FvwmButtons
+ I . Style FvwmButtons NeverFocus, NoTitle, TitleAtRight, Sticky, !Borders
+ I . Style FvwmButtons WindowListSkip, StaysOnBottom
+ I . *FvwmButtons: BoxSize fixed
+ I . *FvwmButtons: Columns 2
+ I . *FvwmButtons: Rows 10
+ I . *FvwmButtons: Padding 2 2
+ I . *FvwmButtons: Back $[FVWM_WBG]
+ I . *FvwmButtons: Fore $[FVWM_WFG]
+ I . *FvwmButtons: Frame 4
+ I . *FvwmButtons: Geometry 288x1620+0+0
+ I . *FvwmButtons: (2x9+0 Swallow(UseOld) "FvwmPager")
+ I . *FvwmButtons: (1x1+1+9 Swallow(NoClose, UseOld, NoHints) "XXkb" \
                    "Exec exec xxkb")
+ I . *FvwmButtons: (1x1+0+9 Swallow(NoClose, UseOld) "stalonetray")


AddToFunc InitBackgroundTerms
+ I All ("backgroundterm") Layer 0 2


#
# FvwmIconMan:
#

AddToFunc DeiconifyAndFocusAndRaise
+ I Iconify false
+ I Focus
+ I Raise

*FvwmIconMan: Background $[FVWM_WBG]
*FvwmIconMan: Foreground $[FVWM_WFG]
#*FvwmIconMan: DrawIcons always
*FvwmIconMan: Font "-misc-fixed-medium-r-semicondensed-*-*-120-*-*-*-*-*-*"
*FvwmIconMan: Action Mouse 1 A sendcommand DeiconifyAndFocusAndRaise
*FvwmIconMan: Action Mouse 2 A sendcommand Iconify
*FvwmIconMan: Format "%t"
*FvwmIconMan: Page
*FvwmIconMan: Show *
*FvwmIconMan: DontShow FvwmButtons
*FvwmIconMan: PlainButton up
*FvwmIconMan: SelectButton up $[FVWM_WFG] $[FVWM_WHL]
*FvwmIconMan: FocusButton down $[FVWM_WFG] $[FVWM_WBG]
*FvwmIconMan: FocusAndSelectButton down $[FVWM_WFG] $[FVWM_WHL]
*FvwmIconMan: IconButton up
*FvwmIconMan: FollowFocus true
*FvwmIconMan: ManagerGeometry 2x4
*FvwmIconMan: ButtonGeometry 10x16 # Horizontal size seems to be ignored
*FvwmIconMan: UseWinList false
*FvwmIconMan: ShowTransient False

# The following settings are interpreted by EMACS, do not remove them.
# Local Variables:
# mode: fvwm
# fill-column: 80
# coding: utf-8
# End:
